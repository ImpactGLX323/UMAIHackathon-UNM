<!DOCTYPE html>
<html>
<head>
    <title>Questionnaire</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css2.css">
</head>
<body>
    <h1><center>Diabetes Prediction Questionnaire</center></h1>
    <center>
        <form action="results.html" method="GET" id="questionnaireForm" onsubmit="handleSubmit(event)"> 
            <div class="field-section active first-field">
                <label><b>Shall we start this questionnaire?</b></label>
                <br>
                <div class="navigation-buttons">
                    <input type="button" value="Start Questionnaire" onclick="nextField()">
                </div>
            </div>
            <div class="field-section">
            <label for="gender"><b>Gender:</b></label>
            <select id="gender" name="gender" required>
                <option value="" disabled selected>Select Here</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Prefer Not To Say">Prefer Not To Say</option>
            </select>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>

        <div class="field-section">
            <label for="age"><b>Age:</b></label>
            <input type="number" id="age" name="age" min="1" max="120" required>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>

        <div class="field-section">
            <label for="bp_sys"><b>Blood Pressure (Systolic / Diastolic):</b></label>
            <div class="flex-inputs">
                <input type="number" id="bp_sys" name="bp_sys" placeholder="Systolic" min="80" max="200" required>
                <input type="number" id="bp_dia" name="bp_dia" placeholder="Diastolic" min="40" max="120" required>
            </div>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>

        <div class="field-section">
            <label for="heartdisease"><b>Do you currently have heart disease?</b></label>
            <select id="heartdisease" name="heartdisease" required>
                <option value="" disabled selected>Select Here</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>

        <div class="field-section">
            <label for="smokehis"><b>Do you have a smoking history?</b></label>
            <select id="smokehis" name="smokehis" required>
                <option value="" disabled selected>Select Here</option>
                <option value="No Info">No Info</option>
                <option value="Never">Never</option>
                <option value="Former">Former</option>
                <option value="Current">Current</option>
                <option value="Not Current">Not Current</option>
                <option value="Ever">Ever</option>
            </select>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>

        <div class="field-section">
            <label for="height"><b>Height(cm):</b></label>
            <input type="number" id="height" name="height" min="1" required>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>
        
        <div class="field-section">
            <label for="weight"><b>Weight(kg):</b></label>
            <input type="number" id="weight" name="weight" min="1" step="0.1" required>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="button" value="Next" onclick="nextField()">
            </div>
        </div>

        <div class="field-section">
            <label for="bloodsugar"><b>Last Blood Sugar Level:</b></label>
            <input type="text" id="bloodsugar" name="bloodsugar" placeholder="Enter blood sugar level" oninput="this.value = this.value.replace(/[^0-9.]/g, '');" required>
            <div class="navigation-buttons">
                <input type="button" value="Back" onclick="previousField()">
                <input type="submit" value="Submit">
            </div>
        </div>

    </form>
    <p id="errorMessage" class="error"></p>
    </center>

    <script>
        let currentFieldIndex = 0;
        const fields = document.querySelectorAll('.field-section');
    
        function nextField() {
            const requiredInputs = fields[currentFieldIndex].querySelectorAll('[required]');
            let allValid = true;
            requiredInputs.forEach(input => {
                if (!input.checkValidity()) {
                    allValid = false;
                    input.reportValidity();
                }
            });
    
            if (allValid && currentFieldIndex < fields.length - 1) {
                fields[currentFieldIndex].classList.remove('active');
                currentFieldIndex++;
                fields[currentFieldIndex].classList.add('active');
            }
        }
    
        function previousField() {
            if (currentFieldIndex > 0) {
                fields[currentFieldIndex].classList.remove('active');
                currentFieldIndex--;
                fields[currentFieldIndex].classList.add('active');
            }
        }

        function handleSubmit(event) {
            event.preventDefault();
            const body = document.querySelector('body');
            body.classList.add('fade-out');
            setTimeout(() => {
                const form = document.getElementById('questionnaireForm');
                form.submit();
            }, 800);
        }
    </script>
</body>
</html>
