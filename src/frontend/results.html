<!doctype html>
<html>
    <head>
        <title>Results</title>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css2.css">
        <script>
            function displayResults() {
                const urlParams = new URLSearchParams(window.location.search);
                const gender = urlParams.get('gender');
                const age = urlParams.get('age');
                const bpSys = urlParams.get('bp_sys');
                const bpDia = urlParams.get('bp_dia');
                const heartDisease = urlParams.get('heartdisease');
                const smokeHistory = urlParams.get('smokehis');
                const height = urlParams.get('height');
                const weight = urlParams.get('weight');
                const bloodSugar = urlParams.get('bloodsugar');

                document.getElementById('genderResult').innerText = gender;
                document.getElementById('ageResult').innerText = age;
                document.getElementById('bpResult').innerText = `${bpSys} / ${bpDia}`;
                document.getElementById('heartDiseaseResult').innerText = heartDisease;
                document.getElementById('smokeHistoryResult').innerText = smokeHistory;
                document.getElementById('heightResult').innerText = `${height} cm`;
                document.getElementById('weightResult').innerText = `${weight} kg`;
                document.getElementById('bloodSugarResult').innerText = bloodSugar;

                const heightinmetres = height / 100;
                const bmi = (weight / (heightinmetres ** 2)).toFixed(2);
                document.getElementById('bmiresults').innerText = bmi;

                let bmicat = '';
                let bmiColor='#4CAF50';
                if (bmi < 18.5) {
                    bmicat = 'Underweight';
                    bmiColor='#FFD700'
                } else if (bmi >= 18.5 && bmi <= 24.9) {
                    bmicat = 'Normal Weight';
                } else if (bmi > 24.9 && bmi <= 29.9) {
                    bmicat = 'Overweight';
                    bmiColor = '#FFA500';
                } else {
                    bmicat = 'Obese';
                    bmiColor = '#f44336';
                }
                document.getElementById('bmilevel').innerText = bmicat;
                document.getElementById('bmiresults').style.color = bmiColor;
                document.getElementById('bmilevel').style.color = bmiColor;
                displayAdvice(bpSys, bpDia, heartDisease, smokeHistory, bmi, bloodSugar);
            }

            function displayAdvice(bpSys, bpDia, heartDisease, smokeHistory, bmi, bloodSugar) {
                let bpAdvice = '';
                let bpColor = '#333';
                if (parseInt(bpSys) > 130 || parseInt(bpDia) > 80) {
                    bpAdvice = 'Your blood pressure is high. Consider reducing salt intake, staying active, and consulting your healthcare provider for personalized guidance.';
                    bpColor = '#f44336';
                } else {
                    bpAdvice = 'Your blood pressure is within a normal range. Keep up the healthy habits to maintain it.';
                    bpColor = '#4CAF50';
                }

                let smokeAdvice = '';
                let smokeColor = '#333';
                switch (smokeHistory.toLowerCase()) {
                    case 'no info':
                        smokeAdvice = 'Smoking history information is not available. Please consider providing accurate details for more personalized advice.';
                        smokeColor = '#777';
                        break;
                    case 'never':
                        smokeAdvice = 'Great job avoiding smoking! Keep it up for your long-term health.';
                        smokeColor = '#4CAF50';
                        break;
                    case 'former':
                        smokeAdvice = 'It\'s great that you quit smoking! Continuing to stay smoke-free will significantly benefit your health over time.';
                        smokeColor = '#4CAF50';
                        break;
                    case 'current':
                        smokeAdvice = 'Smoking is harmful to your health. Quitting smoking can greatly improve your overall health. Consider seeking support through programs or medical advice.';
                        smokeColor = '#f44336';
                        break;
                    case 'not current':
                        smokeAdvice = 'You\'ve stopped smoking, which is a positive step for your health! It\'s important to stay smoke-free for long-term well-being.';
                        smokeColor = '#4CAF50';
                        break;
                    case 'ever':
                        smokeAdvice = 'Having smoked in the past means you have an increased risk of health issues. It\'s essential to continue avoiding smoking and maintain a healthy lifestyle.';
                        smokeColor = '#f44336';
                        break;
                    default:
                        smokeAdvice = 'Invalid smoking history information. Please ensure accurate data for better guidance.';
                        smokeColor = '#f44336';
                        break;
                }

                let bmiAdvice = '';
                let bmiColor = '#333';
                if (bmi < 18.5) {
                    bmiAdvice = 'You are underweight. Consider speaking to a nutritionist to create a balanced eating plan and ensure you are getting enough nutrients.';
                    bmiColor = '#FFD700';
                } else if (bmi >= 18.5 && bmi <= 24.9) {
                    bmiAdvice = 'Your weight is normal. Continue to maintain a balanced diet and stay active.';
                    bmiColor = '#4CAF50';
                } else if (bmi > 24.9 && bmi <= 29.9) {
                    bmiAdvice = 'You are overweight. Consider adopting healthier eating habits, increasing physical activity, and consulting a healthcare professional for personalized advice.';
                    bmiColor = '#FFA500'; 
                } else {
                    bmiAdvice = 'You are obese. It is important to make changes in your diet and exercise routine. Consider speaking to a healthcare professional for guidance on weight management.';
                    bmiColor = '#f44336'; 
                }

                let bloodSugarAdvice = '';
                let sugarColor = '#333';
                if (parseInt(bloodSugar) < 70) {
                    bloodSugarAdvice = 'Your blood sugar level is low. Consider having small, frequent meals and speak to a healthcare provider if you experience symptoms like dizziness or weakness.';
                    sugarColor = '#f44336';
                } else if (parseInt(bloodSugar) > 126) {
                    bloodSugarAdvice = 'Your blood sugar level is high. It is important to reduce sugar intake, exercise regularly, and consult with a doctor to manage your blood sugar.';
                    sugarColor = '#f44336';
                } else {
                    bloodSugarAdvice = 'Your blood sugar levels are within a normal range. Maintain a balanced diet and regular exercise to keep it in check.';
                    sugarColor = '#4CAF50';
                }

                let heartDiseaseAdvice = '';
                let heartDiseaseColor = '#333';
                if (heartDisease.toLowerCase() === 'yes') {
                    heartDiseaseAdvice = 'With a history of heart disease, regular checkups, a heart-healthy diet, staying active, and stress management are vital. Work with your doctor to monitor key health markers and keep your heart as healthy as possible.';
                    heartDiseaseColor = '#f44336';
                    document.getElementById('heartDiseaseSection').style.display = 'block';
                } else {
                    document.getElementById('heartDiseaseSection').style.display = 'none';
                }

                document.getElementById('bpAdvice').innerHTML = `<span style="color:${bpColor}">${bpAdvice}</span>`;
                document.getElementById('heartAdvice').innerHTML = `<span style="color:${heartDiseaseColor}">${heartDiseaseAdvice}</span>`;
                document.getElementById('smokeAdvice').innerHTML = `<span style="color:${smokeColor}">${smokeAdvice}</span>`;
                document.getElementById('bmiAdvice').innerHTML = `<span style="color:${bmiColor}">${bmiAdvice}</span>`;
                document.getElementById('bloodSugarAdvice').innerHTML = `<span style="color:${sugarColor}">${bloodSugarAdvice}</span>`;
            }

            function handleBack(event) {
                event.preventDefault();
                const body = document.querySelector('body');
                body.classList.add('fade-out');
                setTimeout(() => {
                    window.location.href = 'questionnaire.html';
                }, 800);
            }
        </script>
    </head>

    <body onload="displayResults()">
        <div class="container">
            <div class="results-section">
                <h1>Submitted Results</h1>
                <ul>
                    <li><b>Gender:</b> <span id="genderResult"></span></li>
                    <li><b>Age:</b> <span id="ageResult"></span></li>
                    <li><b>Blood Pressure (Systolic / Diastolic):</b> <span id="bpResult"></span></li>
                    <li><b>Heart Disease:</b> <span id="heartDiseaseResult"></span></li>
                    <li><b>Smoking History:</b> <span id="smokeHistoryResult"></span></li>
                    <li><b>Height:</b> <span id="heightResult"></span></li>
                    <li><b>Weight:</b> <span id="weightResult"></span></li>
                    <li><b>Last Blood Sugar Level:</b> <span id="bloodSugarResult"></span></li>
                </ul>
            </div>

            <div class="bmi-section">
                <h1>Calculated Results</h1>
                <p><b>Your BMI:</b> <span id="bmiresults"></span> (<span id="bmilevel"></span>)</p>
                <p><b>Diabetes Prediction:</b></p>
            </div>

            <div class="advice-section">
                <h1>Advice based on results</h1>
                <p><b>Blood Pressure Advice:</b> <span id="bpAdvice"></span></p>
                <p id="heartDiseaseSection" style="display:none;">
                    <b>Heart Disease Advice:</b> <span id="heartAdvice"></span>
                </p>
                <p><b>Smoking History Advice:</b> <span id="smokeAdvice"></span></p>
                <p><b>BMI Advice:</b> <span id="bmiAdvice"></span></p>
                <p><b>Blood Sugar Advice:</b> <span id="bloodSugarAdvice"></span></p>
            </div>
        </div>

        <center>
            <input type="button" class="back-button" value="Back to Questionnaire" onclick="handleBack(event)">
            <br><br>
        </center>
    </body>
</html>
